{"version":3,"file":"static/webpack/static/development/pages/index.js.eef40112cef3a3d5b5d4.hot-update.js","sources":["webpack:///./components/common/profile.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport jsCookie from 'js-cookie';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MessageModal from '../common/message-modal';\nimport LoadingModal from '../common/loading-modal';\nimport { selectors, actions } from '../../redux';\nimport EosClient from '../../libs/eos-client';\nimport colors from '../../libs/styleguide/colors';\nimport t from '../../libs/i18n-util';\n\nimport analytics from '../../libs/analytics-helper';\n\nconst styles = {\n  root: {\n    height: 36,\n    background: colors.darkGrey2,\n    borderRadius: 4,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-around',\n    padding: '0px 9px 0px 9px',\n  },\n  accountText: {\n    color: colors.orangeYellow,\n    fontSize: 10,\n  },\n  welcomeText: {\n    fontSize: 10,\n  },\n  logOutText: {\n    cursor: 'pointer',\n    fontSize: 10,\n    color: colors.darkGrey5,\n  },\n  logInText: {\n    cursor: 'pointer',\n    color: colors.orangeYellow,\n    fontSize: 10,\n    margin: 'auto',\n  },\n  secondLine: {\n    display: 'flex',\n    justifyContent: 'space-between',\n  },\n};\n\n@connect(({ account }) => ({ account }))\nclass Profile extends React.Component {\n\n  state = {\n    modalOpen: false,\n    loadingOpen: false,\n  }\n\n  handleClickLogOut = async () => {\n    this.props.dispatch(actions.logOut());\n    jsCookie.remove('chain.account');\n    const eosClient = EosClient.getInstance();\n    if (eosClient.scatter) {\n      eosClient.scatter.logout();\n    }\n  }\n\n  handleClickLogIn = async () => {\n    this.setState({ loadingOpen: true });\n    const eosClient = EosClient.getInstance();\n    try {\n      await eosClient.init();\n      if (eosClient.account) {\n        this.props.dispatch(actions.updateAccount(eosClient.account));\n        this.setState({ loadingOpen: false });\n        analytics.trackLoggedIn(eosClient.account.name);\n        analytics.identify(eosClient.account.name);\n        return;\n      }\n    } catch (error) {\n      console.error(error);\n    }\n    this.setState({ loadingOpen: false });\n    this.setState({ modalOpen: true });\n  }\n\n  handleModalClose = () => {\n    this.setState({ modalOpen: false });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const account = selectors.account(this.props);\n    if (account) {\n      return (\n        <div className={classes.root}>\n          <div className={classes.accountText}>{account.name}</div>\n          <div className={classes.secondLine}>\n            <div className={classes.welcomeText}>{t('welcome_back')}</div>\n            <a href=\"#\" className={classes.logOutText} onClick={this.handleClickLogOut}>{t('log_out')}</a>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div className={classes.root}>\n          <a href=\"#\" className={classes.logInText} onClick={this.handleClickLogIn}>\n            {t('please_log_in')}\n          </a>\n          <MessageModal open={this.state.modalOpen} onClose={this.handleModalClose}>{t('no_scatter')}</MessageModal>\n          <LoadingModal open={this.state.loadingOpen} />\n        </div>\n      );\n    }\n  }\n}\n\nProfile.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func,\n};\n\nexport default withStyles(styles)(Profile);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AAFA;AAIA;AACA;AADA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAFA;AA5BA;AAmCA;AADA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;AAFA;AACA;;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AATA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAaA;AACA;AAdA;AAeA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAkBA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAGA;AACA;;;;AA/DA;AAkEA;AACA;AACA;AAFA;AAKA;;;;A","sourceRoot":""}