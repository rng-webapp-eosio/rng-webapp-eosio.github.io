{"version":3,"file":"static/webpack/static/development/pages/baccarat/m.js.2db208035da0e79c24dc.hot-update.js","sources":["webpack:///./components/header-status.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { Grid } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport EosClient from '../libs/eos-client';\nimport { Profile } from './common';\n\nimport config from '../config';\nimport EosAmount from './eos-amount';\nimport { selectors, actions } from '../redux';\nimport colors from '../libs/styleguide/colors';\n\n/** @type {EosClient} */\nconst eosClient = EosClient.getInstance();\n\nconst styles = {\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    height: 44,\n  },\n  icon: {\n    width: 30,\n    height: 30,\n    padding: 7,\n  },\n  amount: {\n    height: 36,\n    lineHeight: '36px',\n    fontSize: 16,\n    paddingRight: 10,\n    borderRadius: 4,\n  },\n  twoBox: {\n    flexGrow: 1,\n    height: 44,\n    margin: 0,\n  },\n  status: {\n    height: 36,\n    background: colors.darkGrey2,\n    borderRadius: 4,\n  },\n  gridItem: {\n    height: 18,\n    display: 'flex',\n    alignItems: 'center',\n  },\n  barWrap: {\n    flexBasis: 'auto',\n    flexGrow: 1,\n    lineHeight: 9,\n    height: 9,\n    borderRadius: 5,\n    border: '1px solid #333333',\n    margin: '0px 5px 0px 5px'\n  },\n  barFill: {\n    width: '67%',\n    lineHeight: 9,\n    height: 9,\n    borderRadius: 5,\n    backgroundImage: 'linear-gradient(to right, #0096ff, #42e8df)',\n    color: 'transparent'\n  },\n  leftText: {\n    marginLeft: 8,\n    width: 20,\n    fontSize: 10,\n  },\n  rightText: {\n    marginRight: 8,\n    width: 25,\n    fontSize: 10,\n  },\n  textColor: {\n    color: colors.clearBlue,\n  }\n};\n\n@connect(({ account, myBalance })=>({ account, myBalance }))\nclass HeaderStatus extends React.Component {\n  state = {\n    onBalanceIntervalId: null,\n    cpuUsage: 0,\n    ramUsage: 0,\n  }\n\n  updateBalanceAndRam = async (account) => {\n    this.props.dispatch(await actions.myBalanceUpdateFromRemote());\n    const { cpu } = await eosClient.getResources(account.name);\n    this.setState({ cpuUsage: cpu.used/cpu.max });\n  }\n\n  clearBalanceAndRam = async () => {\n    this.props.dispatch(actions.myBalanceUpdate(null));\n    this.setState({ cpuUsage:0 });\n  }\n\n  componentWillReceiveProps = async (newProps) => {\n    const account = selectors.account(this.props);\n    const newAccount = selectors.account(newProps);\n    if (account === null && newAccount !== null) {\n      this.updateBalanceAndRam(newAccount);\n    } else if (account !== null && newAccount === null) {\n      this.clearBalanceAndRam();\n    }\n  }\n\n  componentDidMount = async () => {\n    const { gameType = 'dice' } = this.props;\n    const account = selectors.account(this.props);\n    if (account) {\n      this.updateBalanceAndRam(account);\n    }\n    const { ram } = await eosClient.getResources(config.contract[gameType]);\n    if (ram.quota !== -1) {\n      this.setState({ ramUsage: ram.usage/ram.quota });\n    }\n  }\n\n  render() {\n\n    let myBalance = selectors.getMyBalance(this.props) || '-1';\n    myBalance = parseFloat(myBalance.replace('EOS', '').trim());\n\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        <img src=\"/static/img/token-eos.svg\"\n          className={classes.icon} />\n\n        <Grid container className={classes.twoBox} spacing={8} alignItems=\"center\">\n          <Grid item xs={4} style={{ paddingRight: 0 }}>\n            <EosAmount style={styles.amount} amount={myBalance}/>\n          </Grid>\n          <Grid item xs={4} style={{ paddingRight: 0 }}>\n            <div className={classes.status}>\n              <div className={classes.gridItem}>\n                <div className={classes.leftText}>CPU</div>\n                <div className={classes.barWrap}>\n                  <div className={classes.barFill} style={{ width:this.state.cpuUsage + '%' }}>fill</div>\n                </div>\n                <div className={classes.rightText}>\n                  <span className={classes.textColor}>{this.state.cpuUsage.toFixed(1)}</span>&nbsp;%\n                </div>\n              </div>\n              <div className={classes.gridItem}>\n                <div className={classes.leftText}>RAM</div>\n                <div className={classes.barWrap}>\n                  <div className={classes.barFill} style={{ width:this.state.ramUsage + '%' }}>fill</div>\n                </div>\n                <div className={classes.rightText}>\n                  <span className={classes.textColor}>{this.state.ramUsage.toFixed(1)}</span>&nbsp;%\n                </div>\n              </div>\n            </div>\n          </Grid>\n          <Grid item xs={4}>\n            <Profile/>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nHeaderStatus.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func,\n  gameType: PropTypes.oneOf(['dice', 'baccarat', 'pk10']),\n};\n\nexport default withStyles(styles)(HeaderStatus);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AADA;AA5DA;AAkEA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAHA;AACA;;;;;;AAKA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AAKA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AASA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AANA;AAAA;AACA;AADA;AAAA;AAMA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAWA;AAEA;AACA;AAHA;AAOA;AACA;AAAA;AACA;AACA;AADA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAKA;AAAA;AAAA;AAMA;;;;AApFA;AAuFA;AACA;AACA;AACA;AAHA;AAMA;;;;A","sourceRoot":""}