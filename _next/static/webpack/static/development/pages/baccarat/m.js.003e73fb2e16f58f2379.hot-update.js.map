{"version":3,"file":"static/webpack/static/development/pages/baccarat/m.js.003e73fb2e16f58f2379.hot-update.js","sources":["webpack:///./components/header-status.js","webpack:///./redux/index.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { Grid } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport EosClient from '../libs/eos-client';\nimport { Profile } from './common';\n\nimport config from '../config';\nimport EosAmount from './eos-amount';\nimport { selectors, actions } from '../redux';\nimport colors from '../libs/styleguide/colors';\n\n/** @type {EosClient} */\nconst eosClient = EosClient.getInstance();\n\nconst styles = {\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    height: 44,\n  },\n  icon: {\n    width: 30,\n    height: 30,\n    padding: 7,\n  },\n  amount: {\n    height: 36,\n    lineHeight: '36px',\n    fontSize: 16,\n    paddingRight: 10,\n    borderRadius: 4,\n  },\n  twoBox: {\n    flexGrow: 1,\n    height: 44,\n    margin: 0,\n  },\n  status: {\n    height: 36,\n    background: colors.darkGrey2,\n    borderRadius: 4,\n  },\n  gridItem: {\n    height: 18,\n    display: 'flex',\n    alignItems: 'center',\n  },\n  barWrap: {\n    flexBasis: 'auto',\n    flexGrow: 1,\n    lineHeight: 9,\n    height: 9,\n    borderRadius: 5,\n    border: '1px solid #333333',\n    margin: '0px 5px 0px 5px'\n  },\n  barFill: {\n    width: '67%',\n    lineHeight: 9,\n    height: 9,\n    borderRadius: 5,\n    backgroundImage: 'linear-gradient(to right, #0096ff, #42e8df)',\n    color: 'transparent'\n  },\n  leftText: {\n    marginLeft: 8,\n    width: 20,\n    fontSize: 10,\n  },\n  rightText: {\n    marginRight: 8,\n    width: 25,\n    fontSize: 10,\n  },\n  textColor: {\n    color: colors.clearBlue,\n  }\n};\n\n@connect(({ account, myBalance })=>({ account, myBalance }))\nclass HeaderStatus extends React.Component {\n  state = {\n    onBalanceIntervalId: null,\n    cpuUsage: 0,\n    ramUsage: 0,\n  }\n\n  updateBalanceAndRam = async (account) => {\n    const myBalance = await eosClient.getMyBalance();\n    this.props.dispatch(actions.myBalanceUpdate(myBalance));\n    const { cpu } = await eosClient.getResources(account.name);\n    this.setState({ cpuUsage: cpu.used/cpu.max });\n  }\n\n  clearBalanceAndRam = async () => {\n    this.props.dispatch(actions.myBalanceUpdate(null));\n    this.setState({ cpuUsage:0 });\n  }\n\n  componentWillReceiveProps = async (newProps) => {\n    const account = selectors.account(this.props);\n    const newAccount = selectors.account(newProps);\n    if (account === null && newAccount !== null) {\n      this.updateBalanceAndRam(newAccount);\n    } else if (account !== null && newAccount === null) {\n      this.clearBalanceAndRam();\n    }\n  }\n\n  componentDidMount = async () => {\n    const { gameType = 'dice' } = this.props;\n    const account = selectors.account(this.props);\n    if (account) {\n      this.updateBalanceAndRam(account);\n    }\n    const { ram } = await eosClient.getResources(config.contract[gameType]);\n    if (ram.quota !== -1) {\n      this.setState({ ramUsage: ram.usage/ram.quota });\n    }\n  }\n\n  render() {\n\n    let myBalance = selectors.getMyBalance(this.props) || '-1';\n    myBalance = parseFloat(myBalance.replace('EOS', '').trim());\n\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        <img src=\"/static/img/token-eos.svg\"\n          className={classes.icon} />\n\n        <Grid container className={classes.twoBox} spacing={8} alignItems=\"center\">\n          <Grid item xs={4} style={{ paddingRight: 0 }}>\n            <EosAmount style={styles.amount} amount={myBalance}/>\n          </Grid>\n          <Grid item xs={4} style={{ paddingRight: 0 }}>\n            <div className={classes.status}>\n              <div className={classes.gridItem}>\n                <div className={classes.leftText}>CPU</div>\n                <div className={classes.barWrap}>\n                  <div className={classes.barFill} style={{ width:this.state.cpuUsage + '%' }}>fill</div>\n                </div>\n                <div className={classes.rightText}>\n                  <span className={classes.textColor}>{this.state.cpuUsage.toFixed(1)}</span>&nbsp;%\n                </div>\n              </div>\n              <div className={classes.gridItem}>\n                <div className={classes.leftText}>RAM</div>\n                <div className={classes.barWrap}>\n                  <div className={classes.barFill} style={{ width:this.state.ramUsage + '%' }}>fill</div>\n                </div>\n                <div className={classes.rightText}>\n                  <span className={classes.textColor}>{this.state.ramUsage.toFixed(1)}</span>&nbsp;%\n                </div>\n              </div>\n            </div>\n          </Grid>\n          <Grid item xs={4}>\n            <Profile/>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nHeaderStatus.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func,\n  gameType: PropTypes.oneOf(['dice', 'baccarat', 'pk10']),\n};\n\nexport default withStyles(styles)(HeaderStatus);\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunkMiddleware from 'redux-thunk';\nimport _ from 'lodash';\n\nimport * as pk10Redux from './pk10';\nimport * as diceRedux from './dice';\nimport * as baccaratRedux from './baccarat';\n\n// my balance\nconst ACTION_UPDATE_MY_BALANCE = 'ACTION_UPDATE_MY_BALANCE';\nconst ACTION_UPDATE_ACCOUNT = 'ACTION_UPDATE_ACCOUNT';\n\nconst ACTION_UPDATE_MESSAGE_MODAL = 'ACTION_UPDATE_MESSAGE_MODAL';\nconst ACTION_UPDATE_LOADING_MODAL = 'ACTION_UPDATE_LOADING_MODAL';\nconst ACTION_UPDATE_ERROR_MODAL = 'ACTION_UPDATE_ERROR_MODAL';\n\nconst INITIAL_STATE = {\n  myBalance: null,\n  account: null,\n  modal: {\n    error: {\n      open: false,\n      content: null,\n    },\n    message: {\n      open: false,\n      content: null,\n    },\n    loading: {\n      open: false,\n      content: null,\n    },\n  },\n  [baccaratRedux.NAME_SPACE]: baccaratRedux.INITIAL_STATE,\n  [pk10Redux.NAME_SPACE]: pk10Redux.INITIAL_STATE,\n  [diceRedux.NAME_SPACE]: diceRedux.INITIAL_STATE,\n};\n\nconst rootReducer = combineReducers({\n  myBalance: (state = INITIAL_STATE.myBalance, action) => {\n    switch (action.type) {\n    case ACTION_UPDATE_MY_BALANCE: {\n      const { myBalance } = action.payload;\n      return myBalance;\n    }\n    default:\n      return state;\n    }\n  },\n  account: (state = INITIAL_STATE.account, action) => {\n    const { type, payload } = action;\n    switch (type) {\n    case ACTION_UPDATE_ACCOUNT: {\n      const { account } = payload;\n      return account;\n    }\n    default:\n      return state;\n    }\n  },\n  modal: (state = INITIAL_STATE.modal, action) => {\n    const { type, payload } = action;\n    switch (type) {\n    case ACTION_UPDATE_ERROR_MODAL: {\n      const { open, content } = payload;\n      const { error, ...rest } = state;\n      return { ...rest, error: { open,content } };\n    }\n    case ACTION_UPDATE_MESSAGE_MODAL: {\n      const { open, content } = payload;\n      const { message, ...rest } = state;\n      return { ...rest, message: { open,content } };\n    }\n    case ACTION_UPDATE_LOADING_MODAL: {\n      const { open, content } = payload;\n      const { loading, ...rest } = state;\n      return { ...rest, loading: { open,content } };\n    }\n    default:\n      return state;\n    }\n\n  },\n  [baccaratRedux.NAME_SPACE]: baccaratRedux.reducer,\n  [pk10Redux.NAME_SPACE]: pk10Redux.reducer,\n  [diceRedux.NAME_SPACE]: diceRedux.reducer,\n});\n\nexport const store = createStore(rootReducer, INITIAL_STATE);\n\nexport function initializeStore(initialState = INITIAL_STATE) {\n  return createStore(rootReducer, initialState, composeWithDevTools(applyMiddleware(thunkMiddleware)));\n}\n\nexport const actions = {\n  myBalanceUpdate: myBalance => ({\n    type: ACTION_UPDATE_MY_BALANCE,\n    payload: { myBalance },\n  }),\n  updateAccount: account => ({\n    type: ACTION_UPDATE_ACCOUNT,\n    payload: { account },\n  }),\n  logOut: () => ({\n    type: ACTION_UPDATE_ACCOUNT,\n    payload: { account: null },\n  }),\n  modal: {\n    showError: content => ({\n      type: ACTION_UPDATE_ERROR_MODAL ,\n      payload: { open: true, content }\n    }),\n    showMessage: content => ({\n      type: ACTION_UPDATE_MESSAGE_MODAL ,\n      payload: { open: true, content }\n    }),\n    showLoading: content => ({\n      type: ACTION_UPDATE_LOADING_MODAL ,\n      payload: { open: true, content }\n    }),\n    closeError: () => ({\n      type: ACTION_UPDATE_ERROR_MODAL ,\n      payload: { open : false }\n    }),\n    closeMessage: () => ({\n      type: ACTION_UPDATE_MESSAGE_MODAL ,\n      payload: { open : false }\n    }),\n    closeLoading: () => ({\n      type: ACTION_UPDATE_LOADING_MODAL ,\n      payload: { open : false }\n    }),\n  },\n  ...baccaratRedux.actions,\n  ...pk10Redux.actions,\n  ...diceRedux.actions,\n};\n\nexport const selectors = {\n  getMyBalance: (store = {} ) => _.get(store, 'myBalance'),\n  account: ( store = {} ) => _.get(store, 'account'),\n  modal: ( store = {} ) => _.get(store, 'modal', {}),\n  modalError: ( store = {} ) => _.get(store, 'modal.error', {}),\n  modalMessage: ( store = {} ) => _.get(store, 'modal.message', {}),\n  modalLoading: ( store = {} ) => _.get(store, 'modal.loading', {}),\n  ...baccaratRedux.selectors,\n  ...pk10Redux.selectors,\n  ...diceRedux.selectors,\n};"],"mappings":"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","sourceRoot":""}